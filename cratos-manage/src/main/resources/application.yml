#file: noinspection SpringBootApplicationYaml
logging:
  config: classpath:logback-spring.xml
  structured:
    format:
      console: ecs
      file: ecs

spring:
  application:
    name: cratos
    version: 1.1.0
  threads:
    virtual:
      enabled: on
  jackson:
    time-zone: GMT+8
    date-format: yyyy-MM-dd HH:mm:ss
  jmx:
    enabled: off
  profiles:
    active: '@env@'
  # 关闭控制台
  shell:
    interactive:
      enabled: off
    script:
      enabled: off
  lifecycle:
    # 设置缓冲时间 默认30s
    timeout-per-shutdown-phase: 45s
  main:
    banner-mode: CONSOLE
  codec:
      max-in-memory-size: 20MB

server:
  # HTTP 2.0支持
  http2:
    enabled: true
    max-concurrent-streams: 128
    initial-window-size: 65536
  # 服务端口
  port: 8081
  servlet:
    # 项目 contextPath
    context-path: /
  tomcat:
    # 调整为4C8G参数
    # tomcat的URI编码
    uri-encoding: UTF-8
    accept-count: 400
    max-connections: 800
    max-http-form-post-size: 209715200
    threads:
      # tomcat最大线程数，默认为200
      max: 800
      # Tomcat启动初始化的线程数，默认值25
      min-spare: 25
  shutdown: graceful

cratos:
  # en-us | zh-cn
  language: en-us
  user:
    create:
      defaultRoles:
        - BASE
        - DEV
  auth:
    white:
      resources:
        # 前缀匹配
        - /swagger-resources
        - /swagger-ui/
        - /v3/api-docs
        - /api/log/login
        - /api/instance/health/lb-check
        # WebSocket独立鉴权
        - /socket/
        # health
        - /actuator
        # Hooks
        - /api/receive/event/gitlab/v4/system/hooks
        - /api/receive/event/eaglecloud/sase/hooks
        - /api/receive/event/eaglecloud/sase/v2/hooks
        # 静态资源
        - /index.html
        - /static/
        - /*.html
        - /*.css
        - /*.js
        - /*.png
        - /*.jpg
        - /*.gif
        - /*.ico
        # Callback
        - /api/callback/

mapper:
  mappers:
    - tk.mybatis.mapper.common.Mapper
  not-empty: on
  identity: MYSQL
  before: off

pagehelper:
  helper-dialect: mysql
  reasonable: on
  support-methods-arguments: on
  params: count=countSql

mybatis:
  type-aliases-package: com.baiyi.cratos.domain
  mapper-locations: classpath:/mapper/*.xml
  configuration:
    map-underscore-to-camel-case: on

ssh:
  honeypot:
    enable: on
  audit:
    # on 开启审计日志 off 关闭审计日志
    open: on
    # 审计日志目录
    path: ${HOME}/cratos-data/ssh/audit
  # 默认值 15分钟断开连接
  timeout: 900
  shell:
    version: 1.0.0
    # simple security
    authentication: security
    # auth-provider-bean-name: publickeyAuthenticatorProvider
    commands:
      actuator:
        excludes:
          - audit
      history:
        enable: on
    display-banner: on
    host: 0.0.0.0
    port: 2223
    shared-history: off
    history-directory: ${home}/cratos-data/ssh-server/history-log/
    host-key-file: ${home}/cratos-data/ssh-server/hostKey.ser
    prompt:
      # white|cyan
      color: cyan
      text: 'cratos>'

# SOCKS 代理配置
socks:
  proxy:
    # 是否启用 SOCKS 代理服务器
    enabled: on
    # 是否自动启动
    auto-start: on
    # 代理服务器名称
    name: default
    # SOCKS 代理监听端口
    port: 1081
    # 绑定地址
    bind-address: 0.0.0.0
    # 连接超时时间（毫秒）
    connection-timeout: 30000
    # 读取超时时间（毫秒）
    read-timeout: 30000
    # 最大线程数
    max-threads: 200
    # 缓冲区大小
    buffer-size: 8192
    # 是否启用 SOCKS4 支持
    socks4-enabled: true
    # 是否启用 SOCKS5 支持
    socks5-enabled: true
    # 是否启用访问日志
    access-log-enabled: true

jasypt:
  encryptor:
    algorithm: PBEWithMD5AndDES
    iv-generator-classname: 'org.jasypt.iv.NoIvGenerator'

# 加密配置
encryption:
  enabled: true
  keys:
    - version: v1
      privateKey: ENC(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)