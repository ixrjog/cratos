#file: noinspection SpringBootApplicationYaml
logging:
  config: classpath:logback-spring.xml
  structured:
    format:
      console: ecs
      file: ecs

spring:
  application:
    name: cratos
    version: 1.1.0
  threads:
    virtual:
      enabled: on
  jackson:
    time-zone: GMT+8
    date-format: yyyy-MM-dd HH:mm:ss
  jmx:
    enabled: off
  profiles:
    active: '@env@'
  # 关闭控制台
  shell:
    interactive:
      enabled: off
    script:
      enabled: off
  lifecycle:
    # 设置缓冲时间 默认30s
    timeout-per-shutdown-phase: 45s
  main:
    banner-mode: CONSOLE
  codec:
      max-in-memory-size: 20MB

server:
  # HTTP 2.0支持
  http2:
    enabled: true
    max-concurrent-streams: 128
    initial-window-size: 65536
  # 服务端口
  port: 8081
  servlet:
    # 项目 contextPath
    context-path: /
  tomcat:
    # 调整为4C8G参数
    # tomcat的URI编码
    uri-encoding: UTF-8
    accept-count: 400
    max-connections: 800
    max-http-form-post-size: 209715200
    threads:
      # tomcat最大线程数，默认为200
      max: 800
      # Tomcat启动初始化的线程数，默认值25
      min-spare: 25
  shutdown: graceful

cratos:
  # en-us | zh-cn
  language: en-us
  user:
    create:
      defaultRoles:
        - BASE
        - DEV
  auth:
    white:
      resources:
        # 前缀匹配
        - /swagger-resources
        - /swagger-ui/
        - /v3/api-docs
        - /api/log/login
        - /api/instance/health/lb-check
        # WebSocket独立鉴权
        - /socket/
        # health
        - /actuator
        # Hooks
        - /api/receive/event/gitlab/v4/system/hooks
        - /api/receive/event/eaglecloud/sase/hooks
        - /api/receive/event/eaglecloud/sase/v2/hooks
        # 静态资源
        - /index.html
        - /static/
        - /*.html
        - /*.css
        - /*.js
        - /*.png
        - /*.jpg
        - /*.gif
        - /*.ico
        # Callback
        - /api/callback/

mapper:
  mappers:
    - tk.mybatis.mapper.common.Mapper
  not-empty: on
  identity: MYSQL
  before: off

pagehelper:
  helper-dialect: mysql
  reasonable: on
  support-methods-arguments: on
  params: count=countSql

mybatis:
  type-aliases-package: com.baiyi.cratos.domain
  mapper-locations: classpath:/mapper/*.xml
  configuration:
    map-underscore-to-camel-case: on

ssh:
  honeypot:
    enable: on
  audit:
    # on 开启审计日志 off 关闭审计日志
    open: on
    # 审计日志目录
    path: ${HOME}/cratos-data/ssh/audit
  # 默认值 15分钟断开连接
  timeout: 900
  shell:
    version: 1.0.0
    # simple security
    authentication: security
    # auth-provider-bean-name: publickeyAuthenticatorProvider
    commands:
      actuator:
        excludes:
          - audit
      history:
        enable: on
    display-banner: on
    host: 0.0.0.0
    port: 2223
    shared-history: off
    history-directory: ${home}/cratos-data/ssh-server/history-log/
    host-key-file: ${home}/cratos-data/ssh-server/hostKey.ser
    prompt:
      # white|cyan
      color: cyan
      text: 'cratos>'

# SOCKS 代理配置
socks:
  proxy:
    # 是否启用 SOCKS 代理服务器
    enabled: on
    # 是否自动启动
    auto-start: on
    # 代理服务器名称
    name: default
    # SOCKS 代理监听端口
    port: 1081
    # 绑定地址
    bind-address: 0.0.0.0
    # 连接超时时间（毫秒）
    connection-timeout: 30000
    # 读取超时时间（毫秒）
    read-timeout: 30000
    # 最大线程数
    max-threads: 200
    # 缓冲区大小
    buffer-size: 8192
    # 是否启用 SOCKS4 支持
    socks4-enabled: true
    # 是否启用 SOCKS5 支持
    socks5-enabled: true
    # 是否启用访问日志
    access-log-enabled: true

jasypt:
  encryptor:
    algorithm: PBEWithMD5AndDES
    iv-generator-classname: 'org.jasypt.iv.NoIvGenerator'

# 加密配置
encryption:
  enabled: true
  keys:
    - version: v1
      privateKey: ENC(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)